<% if @check_index && current_user.position != 'manager' %>
    <% @all_tickets = Ticket.all.select{|t| t.status != 'N/A' && t.status != 'closed'}%>
        <% else %>
            <% @all_tickets = Ticket.all.select{|t| t.status != 'N/A'} %>
                <% end %>
                    <table class="table table-hover" id='ticket-table'>
                        <thead>
                            <tr>
                                <th>customer</th>
                                <th>author</th>
                                <th>Category</th>
                                <th>Department</th>
                                <th>Status</th>
                                <th>Next step</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <% @all_tickets.each do |ticket| %>

                                <tr onclick="window.document.location='http://google.com'"  class="table-row" data-link="http://google.com">
                                    <td>
                                        <%= link_to ticket_path(ticket) do %>
                                            <%= ticket.customer_cnic %>
                                                <% end %>
                                    </td>
                                    <td>
                                        <%= ticket.author.name %>
                                    </td>
                                    <td>
                                        <%= ticket.category %>
                                    </td>
                                    <td>
                                        <%= ticket.department %>
                                    </td>
                                    <td class="best_in_place">
                                        <%= best_in_place ticket, :status, :as => :select, collection: { "new": "new", "active": "active", 'pending': 'pending', 'ready': 'ready', 'closed': 'closed'} %>
                                    </td>
                                    <td>
                                        <%= ticket.next_step %>
                                    </td>
                                    <!--  <% if @check_index %> -->
                                    <!--  <td>
                      <%= link_to ticket do %>
                          <img src="<%= image_path('show.png') %>" alt="" class="edit-icon">
                          <% end %>
                  </td> -->
                                    <!--  <% end %> -->
                                    <td>
                                        <%= link_to edit_ticket_path(ticket) do %>
                                            <img src="<%= image_path('edit.png') %>" alt="" class="edit-icon">
                                            <% end %>
                                    </td>
                                </tr>
                                <% end %>
                        </tbody>
                    </table>
                    <div class="paging"></div>
                    </div>

                    <script>
                    $(document).ready(function() {
                      console.log("jquery ready")
                      $("tr").click(function(e) {
                            console.log(e)
                            // console.log($(this).data("link"))
                            // console.log(<%=@this_ticket%>)
                            //window.location.href = $(this).data("href")
                            console.log("working")

                        })
                    });


                    // $(document).ready(function() {
                    //    Activating Best In Place
                    //   $(".best_in_place").best_in_place();
                    // });

                    $('#ticket-table').datatable({
                        pageSize: 10,
                        sort: [false, false, false],
                        filters: [true, 'select', 'select', 'select', 'select', ],
                        filterText: 'Type to filter... ',
                        onChange: function(old_page, new_page) {
                            console.log('changed from ' + old_page + ' to ' + new_page);
                        }
                    });
                    </script>
